{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "location": {
      "value": "southeastasia"
    },
    "featureFlags": {
      "value": {
        "enablePrivateEndpoints": true,
        "enableVNetIntegration": true,
        "enableApplicationGateway": true,
        "enableApiManagement": true,
        "enableTestVM": false,
        "enableSqlServer": true,
        "enableKeyVault": true,
        "enableAppConfiguration": true,
        "enableBlobStorage": true,
        "enableCosmosDb": true,
        "enableFunctionApps": true,
        "enableServiceBus": true,
        "enableApplicationInsights": true
      }
    },
    "networking": {
      "value": {
        "vnetName": "practicalpe-vnet-prod"
      }
    },
    "applicationGateway": {
      "value": {
        "enableWAF": true,
        "wafMode": "Prevention",
        "wafRuleSetVersion": "3.2",
        "wafRequestBodyCheck": true,
        "wafMaxRequestBodySizeInKb": 512,
        "wafFileUploadLimitInMb": 500
      }
    },
    "sqlServer": {
      "value": {
        "serverName": "practicalpe-sql-prod",
        "adminUsername": "sqladmin",
        "databases": {
          "customerDbName": "PracticalPE-CUSTOMER-DB-PROD",
          "adminDbName": "PracticalPE-ADMIN-DB-PROD",
          "videoDbName": "PracticalPE-VIDEO-DB-PROD",
          "musicDbName": "PracticalPE-MUSIC-DB-PROD"
        }
      }
    },
    "cosmosDb": {
      "value": {
        "accountName": "practicalpe-cosmos-prod",
        "consistencyLevel": "BoundedStaleness",
        "enableAutomaticFailover": true,
        "databases": {
          "adminDbName": "PracticalPE-ADMIN-COSMOS-DB-PROD",
          "customerDbName": "PracticalPE-CUSTOMER-COSMOS-DB-PROD",
          "musicDbName": "PracticalPE-MUSIC-COSMOS-DB-PROD",
          "videoDbName": "PracticalPE-VIDEO-COSMOS-DB-PROD"
        }
      }
    },
    "storage": {
      "value": {
        "accountName": "practicalpeblobprod",
        "functionAppsAccountName": "practicalpefuncprod",
        "accountType": "Premium_ZRS",
        "blobContainerNames": [
          "documents",
          "images",
          "backups",
          "logs",
          "audit-logs",
          "compliance-reports"
        ]
      }
    },
    "keyVault": {
      "value": {
        "name": "practicalpe-kv-prod"
      }
    },
    "appConfiguration": {
      "value": {
        "name": "practicalpe-config-prod"
      }
    },
    "appService": {
      "value": {
        "planName": "practicalpe-asp-prod",
        "webApps": {
          "customerPublicWebAppName": "practicalpe-customer-public-prod",
          "customerSiteWebAppName": "practicalpe-customer-site-prod",
          "adminPublicWebAppName": "practicalpe-admin-public-prod",
          "adminSiteWebAppName": "practicalpe-admin-site-prod",
          "videoApiWebAppName": "practicalpe-video-api-prod",
          "musicApiWebAppName": "practicalpe-music-api-prod"
        }
      }
    },
    "azureFunctions": {
      "value": {
        "adminFunctionAppName": "practicalpe-admin-func-prod",
        "customerFunctionAppName": "practicalpe-customer-func-prod",
        "musicFunctionAppName": "practicalpe-music-func-prod",
        "videoFunctionAppName": "practicalpe-video-func-prod"
      }
    },
    "apiManagement": {
      "value": {
        "name": "practicalpe-apim-prod",
        "sku": "Premium",
        "capacity": 3,
        "publisherEmail": "production@practical.devsecops",
        "publisherName": "Practical DevSecOps Production Team"
      }
    },
    "monitoring": {
      "value": {
        "workspaceName": "practicalpe-law-prod",
        "retentionInDays": 365
      }
    },
    "serviceBus": {
      "value": {
        "namespaceName": "practicalpe-sb-prod",
        "sku": "Premium",
        "capacity": 4,
        "topicNames": [
          "customer-events",
          "admin-events",
          "video-events",
          "music-events",
          "audit-events",
          "compliance-events"
        ],
        "queueNames": [
          "customer-queue",
          "admin-queue",
          "video-queue",
          "music-queue",
          "audit-queue",
          "compliance-queue"
        ],
        "subscriptions": [
          {
            "topicName": "customer-events",
            "subscriptionName": "customer-subscription"
          },
          {
            "topicName": "admin-events",
            "subscriptionName": "admin-subscription"
          },
          {
            "topicName": "video-events",
            "subscriptionName": "video-subscription"
          },
          {
            "topicName": "music-events",
            "subscriptionName": "music-subscription"
          },
          {
            "topicName": "audit-events",
            "subscriptionName": "audit-subscription"
          },
          {
            "topicName": "compliance-events",
            "subscriptionName": "compliance-subscription"
          }
        ]
      }
    },
    "virtualMachine": {
      "value": {
        "adminUsername": "prodadmin"
      }
    }
  }
}
