{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "general": {
      "value": {
        "location": "southeastasia",
        "environment": "prod"
      }
    },
    "featureFlags": {
      "value": {
        "enablePrivateEndpoints": true,
        "enableVNetIntegration": true,
        "enableTestVM": false,
        "enableSqlServer": true,
        "enableKeyVault": true,
        "enableAppConfiguration": true,
        "enableStorageAccount": true,
        "enableCosmosDb": true,
        "enableFunctionApps": true,
        "enableServiceBus": true,
        "enableApplicationInsights": true
      }
    },
    "networking": {
      "value": {
        "vnetName": "practicalmrg-vnet-prod",
        "resourceGroup": "practical-pe-networking-rg-prod",
        "privateDnsZones": {
          "appConfig": "privatelink.azconfig.io",
          "blobStorage": "privatelink.blob.core.windows.net",
          "cosmos": "privatelink.documents.azure.com",
          "serviceBus": "privatelink.servicebus.windows.net",
          "appService": "privatelink.azurewebsites.net",
          "keyVault": "privatelink.vaultcore.azure.net"
        }
      }
    },
    "sql": {
      "value": {
        "serverName": "practicalmrg-sql-prod",
        "adminUsername": "sqladmin",
        "databases": {
          "customerDb": "PracticalMRG-CUSTOMER-DB-PROD",
          "adminDb": "PracticalMRG-ADMIN-DB-PROD",
          "videoDb": "PracticalMRG-VIDEO-DB-PROD",
          "musicDb": "PracticalMRG-MUSIC-DB-PROD"
        }
      }
    },
    "webApps": {
      "value": {
        "appServicePlanName": "practicalmrg-asp-prod",
        "apps": {
          "customerPublic": "practicalmrg-customer-public-prod",
          "customerSite": "practicalmrg-customer-site-prod",
          "adminPublic": "practicalmrg-admin-public-prod",
          "adminSite": "practicalmrg-admin-site-prod",
          "videoApi": "practicalmrg-video-api-prod",
          "musicApi": "practicalmrg-music-api-prod"
        }
      }
    },
    "storage": {
      "value": {
        "mainAccount": {
          "name": "practicalmrgprodblob",
          "type": "Premium_ZRS",
          "containers": [
            "documents",
            "images", 
            "backups",
            "logs",
            "audit-logs",
            "compliance-reports"
          ]
        },
        "functionApps": {
          "name": "practicalmrgprodfunc",
          "type": "Standard_LRS"
        }
      }
    },
    "cosmos": {
      "value": {
        "accountName": "practicalmrg-cosmos-prod",
        "consistencyLevel": "BoundedStaleness",
        "enableAutomaticFailover": true,
        "databases": {
          "adminDb": "PracticalMRG-ADMIN-COSMOS-DB-PROD",
          "customerDb": "PracticalMRG-CUSTOMER-COSMOS-DB-PROD",
          "musicDb": "PracticalMRG-MUSIC-COSMOS-DB-PROD",
          "videoDb": "PracticalMRG-VIDEO-COSMOS-DB-PROD"
        }
      }
    },
    "functions": {
      "value": {
        "apps": {
          "admin": "practicalmrg-admin-func-prod",
          "customer": "practicalmrg-customer-func-prod",
          "music": "practicalmrg-music-func-prod",
          "video": "practicalmrg-video-func-prod"
        }
      }
    },
    "serviceBus": {
      "value": {
        "namespaceName": "practicalmrg-sb-prod",
        "sku": "Premium",
        "capacity": 4,
        "topicNames": [
          "customer-events",
          "admin-events",
          "video-events",
          "music-events",
          "audit-events",
          "compliance-events"
        ],
        "queueNames": [
          "customer-queue",
          "admin-queue", 
          "video-queue",
          "music-queue",
          "audit-queue",
          "compliance-queue"
        ],
        "subscriptions": [
          {
            "topicName": "customer-events",
            "subscriptionName": "customer-subscription"
          },
          {
            "topicName": "admin-events", 
            "subscriptionName": "admin-subscription"
          },
          {
            "topicName": "video-events",
            "subscriptionName": "video-subscription"
          },
          {
            "topicName": "music-events",
            "subscriptionName": "music-subscription"
          },
          {
            "topicName": "audit-events",
            "subscriptionName": "audit-subscription"
          },
          {
            "topicName": "compliance-events",
            "subscriptionName": "compliance-subscription"
          }
        ]
      }
    },
    "applicationInsights": {
      "value": {
        "workspaceName": "practicalmrg-law-prod",
        "retentionInDays": 365
      }
    },
    "testVm": {
      "value": {
        "adminUsername": "prodadmin"
      }
    },
    "keyVault": {
      "value": {
        "name": "practicalmrg-kv-prod"
      }
    },
    "appConfiguration": {
      "value": {
        "name": "practicalmrg-config-prod"
      }
    }
  }
}
